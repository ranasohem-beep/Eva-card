<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Eva Card</title>
<script src="https://unpkg.com/qrious/dist/qrious.min.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background:#f2f2f2;
  text-align:center;
}
.box {
  background:#fff;
  padding:20px;
  margin:20px auto;
  width:90%;
  max-width:500px;
  border-radius:12px;
}
input, select {
  width:100%;
  padding:10px;
  margin:6px 0;
}
button {
  padding:10px;
  width:45%;
  margin:5px;
}
.qr {
  margin:10px;
  cursor:pointer;
}
.card {
  background:#fff;
  padding:15px;
  margin:20px auto;
  width:90%;
  max-width:500px;
  border-radius:10px;
}
.card button {
  width:100%;
  margin:5px 0;
}
</style>
</head>

<body>

<div class="box">
<h3>Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ø¯Ø¹ÙˆØ©</h3>

<input id="eventName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¯Ø¹ÙˆØ©">
<input id="guestCount" type="number" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø¶ÙŠÙˆÙ">
<input id="img1" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰">
<input id="img2" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
<input type="color" id="color" value="#000000" title="Ø§Ø®ØªØ± Ù„ÙˆÙ† Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯">
<input id="scanLimit" type="number" placeholder="Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ù…Ø³Ø­ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">

<div>
<button onclick="generate()">Ø¥Ù†Ø´Ø§Ø¡</button>
<button onclick="clearAll()">Ø¥Ù„ØºØ§Ø¡</button>
</div>
</div>

<div id="qrs"></div>

<button onclick="saveEvent()">ğŸ’¾ Ø­ÙØ¸</button>

<div id="card"></div>

<script>
// Ù„ØªØ®Ø²ÙŠÙ† Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø­ Ù„ÙƒÙ„ Ø¶ÙŠÙ
let scans = {};

function generate(){
  const count = parseInt(document.getElementById("guestCount").value);
  const color = document.getElementById("color").value;
  const img1 = document.getElementById("img1").value;
  const img2 = document.getElementById("img2").value;

  document.getElementById("qrs").innerHTML = "";
  scans = {};

  for(let i=1;i<=count;i++){
    const canvas = document.createElement("canvas");
    canvas.className="qr";
    document.getElementById("qrs").appendChild(canvas);

    new QRious({
      element: canvas,
      value: img1,
      size: 130,
      foreground: color
    });

    // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ â†’ ÙŠÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³Ø­
    canvas.addEventListener("click", ()=>{
      if(!scans[i]) scans[i]=0;
      scans[i]++;
      const url = scans[i] === 1 ? img1 : (img2 || img1);
      window.open(url, "_blank");
    });
  }
}

function clearAll(){
  document.getElementById("qrs").innerHTML = "";
}

function saveEvent(){
  const name = document.getElementById("eventName").value;
  document.getElementById("card").innerHTML = `
  <div class="card">
    <h3>${name}</h3>
    <button>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</button>
    <button>ØªØ­Ù…ÙŠÙ„ QR</button>
    <button>ØªØªØ¨Ø¹ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</button>
    <button>Ø¥Ø¶Ø§ÙØ© Ø¶ÙŠÙˆÙ (Ø¹Ø¯Ø¯)</button>
    <button>Ø¥Ø¶Ø§ÙØ© Ø¶ÙŠÙˆÙ (Ø£Ø³Ù…Ø§Ø¡)</button>
    <button>ØªØ£ÙƒÙŠØ¯ / Ø¥Ù„ØºØ§Ø¡ Ø¶ÙŠÙˆÙ</button>
  </div>`;
}
</script>

</body>
</html>
